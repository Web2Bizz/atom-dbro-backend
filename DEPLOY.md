# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- Git (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

## –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏ Docker

–í `docker-compose.yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω—è—è —Å–µ—Ç—å `atom-external-network`. –°–æ–∑–¥–∞–π—Ç–µ –µ—ë –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:

```bash
docker network create atom-external-network
```

–ï—Å–ª–∏ —Å–µ—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–¥–∞—Å—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=atom_dbro
POSTGRES_PORT=5432

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
PORT=3000

# JWT
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your-refresh-secret-key-change-in-production
JWT_REFRESH_EXPIRES_IN=7d

# CORS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–µ–Ω—ã localhost:5173 –∏ localhost:3000)
# CORS_ORIGINS=http://localhost:5173,https://yourdomain.com

# Database URL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—ã—à–µ)
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/atom_dbro

# S3 Configuration (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
S3_BUCKET_NAME=your-bucket-name
S3_ACCESS_KEY_ID=your-access-key-id
S3_SECRET_ACCESS_KEY=your-secret-access-key
S3_REGION=us-east-1

# S3 Configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
# S3_ENDPOINT=https://s3.ru1.storage.beget.cloud
# S3_PUBLIC_URL_TEMPLATE=https://{bucket}.s3.{region}.amazonaws.com/{key}
# S3_FORCE_PATH_STYLE=true

# RabbitMQ Configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# RABBITMQ_URL=amqp://guest:guest@localhost:5672
# RABBITMQ_HOSTNAME=localhost
# RABBITMQ_PORT=5672
# RABBITMQ_USERNAME=guest
# RABBITMQ_PASSWORD=guest

# Redis Configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
# FORGOT_PASSWORD_TOKEN_TTL=3600  # TTL —Ç–æ–∫–µ–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3600 = 1 —á–∞—Å)

# Frontend URL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# FRONTEND_URL=http://localhost:5173  # –ë–∞–∑–æ–≤—ã–π URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ –ø–∏—Å—å–º–∞—Ö)
```

**‚ö†Ô∏è –í–ê–ñ–ù–û**: 
- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ `JWT_SECRET` –∏ `POSTGRES_PASSWORD` –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!
- **S3 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ –Ω–∏—Ö. –£–∫–∞–∂–∏—Ç–µ –∫–∞–∫ –º–∏–Ω–∏–º—É–º:
  - `S3_BUCKET_NAME`
  - `S3_ACCESS_KEY_ID` (–∏–ª–∏ `AWS_ACCESS_KEY_ID`)
  - `S3_SECRET_ACCESS_KEY` (–∏–ª–∏ `AWS_SECRET_ACCESS_KEY`)

### 3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

#### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤):

```bash
docker compose up -d --build
```

#### –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏):

```bash
docker compose up -d
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –°–æ–±–µ—Ä—ë—Ç –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ Dockerfile
- –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –ó–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ü–æ–¥–æ–∂–¥—ë—Ç, –ø–æ–∫–∞ PostgreSQL —Å—Ç–∞–Ω–µ—Ç –∑–¥–æ—Ä–æ–≤—ã–º, –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker exec -it atom-dbro-app sh

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:migrate

# –í—ã–π—Ç–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
exit
```

–ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker exec -it atom-dbro-app npm run db:migrate
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker compose ps
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose logs -f

# –¢–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker compose logs -f app

# –¢–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
docker compose logs -f postgres
```

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API:

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:3000 (–∏–ª–∏ http://<IP_–°–ï–†–í–ï–†–ê>:3000 –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ)
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:3000/api

**‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ** - –ø–æ—Ä—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (0.0.0.0), –ø–æ—ç—Ç–æ–º—É —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–µ —Ç–æ–ª—å–∫–æ —Å localhost, –Ω–æ –∏ –ø–æ IP-–∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏.

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

1. **–£–∑–Ω–∞–π—Ç–µ IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
# Linux/Mac
hostname -I
# –∏–ª–∏
ip addr show

# Windows
ipconfig
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–≤–Ω–µ:**
   - –° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏: `http://<IP_–°–ï–†–í–ï–†–ê>:3000`
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl: `curl http://<IP_–°–ï–†–í–ï–†–ê>:3000`

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (–µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ):**

   **Linux (ufw):**
   ```bash
   sudo ufw allow 3000/tcp
   sudo ufw reload
   ```

   **Linux (firewalld):**
   ```bash
   sudo firewall-cmd --permanent --add-port=3000/tcp
   sudo firewall-cmd --reload
   ```

   **Windows Firewall:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ "–ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä –ó–∞—â–∏—Ç–Ω–∏–∫–∞ Windows"
   - –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ –ø–æ—Ä—Ç 3000

### 6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è):

```bash
docker compose stop
```

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker compose down
```

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ volumes (‚ö†Ô∏è —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ –ë–î):

```bash
docker compose down -v
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```bash
docker compose up -d --build app
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker exec -it atom-dbro-app sh

# –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ –≥–æ—Ä–æ–¥–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker exec -it atom-dbro-app npm run import:cities
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
docker compose logs -f app
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL
docker exec -it atom-dbro-postgres psql -U postgres -d atom_dbro
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–û—à–∏–±–∫–∞**: `network atom-external-network not found`

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ç—å –∫–æ–º–∞–Ω–¥–æ–π:
```bash
docker network create atom-external-network
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç

**–û—à–∏–±–∫–∞**: `port is already allocated`

**–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `.env` —Ñ–∞–π–ª–µ –∏–ª–∏ `docker-compose.yml`:
```env
APP_PORT=3001
POSTGRES_PORT=5433
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ**: 
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker compose ps`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ: `docker exec atom-dbro-app env | grep DATABASE_URL`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs postgres`

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**: 
- –í development —Ä–µ–∂–∏–º–µ –∫–æ–¥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ volumes, –Ω–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
docker compose restart app
```
- –î–ª—è production –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑:
```bash
docker compose up -d --build app
```
- –ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –¥–µ–ø–ª–æ–µ —á–µ—Ä–µ–∑ GitHub Actions –æ–±—Ä–∞–∑ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push

## Production –¥–µ–ø–ª–æ–π

–î–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env —Ñ–∞–π–ª** —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏ –∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å reverse proxy** (nginx, traefik) –ø–µ—Ä–µ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL/TLS** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å managed –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL
5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
6. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å backup** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
7. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker secrets** –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD (GitHub Actions)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions. –ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É `main` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞, —ç–∫—Å–ø–æ—Ä—Ç –≤ –∞—Ä—Ö–∏–≤, –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ SSH –∏ –¥–µ–ø–ª–æ–π.

### –†–µ–∂–∏–º—ã —Å–±–æ—Ä–∫–∏

CI/CD –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞:

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –Ω–∞ GitHub runner** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –°–±–æ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ GitHub Actions
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤

2. **–£–¥–∞–ª—ë–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ**
   - –°–±–æ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∞—à–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
   - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
     - –ë–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –¥–æ–ª–≥–æ–π —Å–±–æ—Ä–∫–æ–π
     - –ü—Ä–æ–µ–∫—Ç–æ–≤ —Å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é
     - –≠–∫–æ–Ω–æ–º–∏–∏ –º–∏–Ω—É—Ç GitHub Actions
   - –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ (—Å–º. –Ω–∏–∂–µ)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CI/CD –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –û—Ç–∫—Ä–æ–π—Ç–µ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è:

- **`DEPLOY_HOST`** - IP-–∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞ –¥–µ–ø–ª–æ—è
  - –ü—Ä–∏–º–µ—Ä: `192.168.1.100` –∏–ª–∏ `deploy.example.com`
  
- **`DEPLOY_USER`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –ü—Ä–∏–º–µ—Ä: `root`, `deploy`, `ubuntu`
  
- **`DEPLOY_SSH_KEY`** - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
  - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `~/.ssh/id_rsa` (–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞)
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á –±–µ–∑ –ø–∞—Ä–æ–ª—è –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ ssh-agent
  
- **`DEPLOY_PROJECT_PATH`** - –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  - –ü—Ä–∏–º–µ—Ä: `/home/user/atom-dbro-backend` –∏–ª–∏ `/opt/atom-dbro-backend`
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: 
    - –ü—É—Ç—å –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `docker-compose.yml`
    - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å (–Ω–µ `~/`)

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (—Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

- **`DOCKER_IMAGE_NAME`** - –ù–∞–∑–≤–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–∞
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `atom-dbro-backend`
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: 
    - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –¥–µ—Ñ–∏—Å—ã, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –∏ —Ç–æ—á–∫–∏
    - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    - –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `atom-dbro-backend`, `my-app`, `app_v1.0`
    - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `Atom-Dbro-Backend`, `my app`, `app@v1`

- **`DEPLOY_CONTAINER_NAME`** - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `atom-dbro-app`
  - –î–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å `container_name` –≤ `docker-compose.yml`

- **`DEPLOY_SERVICE_NAME`** - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ docker-compose.yml
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `app`
  - –î–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤ `docker-compose.yml`

- **`DEPLOY_COMPOSE_PROJECT_NAME`** - –ò–º—è –ø—Ä–æ–µ–∫—Ç–∞ (—Å—Ç–µ–∫) –¥–ª—è docker compose
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–º—è —Å—Ç–µ–∫–∞
  - –ü—Ä–∏–º–µ—Ä: `atom-dbro-backend`

- **`DEPLOY_SSH_PORT`** - –ü–æ—Ä—Ç SSH
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `22`

- **`RUN_MIGRATIONS`** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
  - –ó–Ω–∞—á–µ–Ω–∏—è: `true` –∏–ª–∏ `false`
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `false` (–º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è)
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `true` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ
  - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–≤–∏—Ç—å `false` –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏:

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

- **`BUILD_SERVER_HOST`** - IP-–∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞ —Å–±–æ—Ä–∫–∏
  - –ü—Ä–∏–º–µ—Ä: `192.168.1.50` –∏–ª–∏ `build.example.com`
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ï—Å–ª–∏ —ç—Ç–æ—Ç —Å–µ–∫—Ä–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤–º–µ—Å—Ç–µ —Å `BUILD_SERVER_USER` –∏ `BUILD_SERVER_SSH_KEY`, —Å–±–æ—Ä–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

- **`BUILD_SERVER_USER`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–±–æ—Ä–∫–∏
  - –ü—Ä–∏–º–µ—Ä: `builder`, `ubuntu`, `root`
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Docker –∫–æ–º–∞–Ω–¥

- **`BUILD_SERVER_SSH_KEY`** - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–±–æ—Ä–∫–∏
  - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `~/.ssh/id_rsa`)
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á –±–µ–∑ –ø–∞—Ä–æ–ª—è
  - –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω–æ–º—É –∫–ª—é—á—É –≤ `~/.ssh/authorized_keys` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏

- **`BUILD_SERVER_SSH_PORT`** - –ü–æ—Ä—Ç SSH –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å–±–æ—Ä–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `22`

- **`BUILD_SERVER_PROJECT_PATH`** - –ü—É—Ç—å –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/tmp/atom-dbro-build`
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —ç—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
  - –í —ç—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±—É–¥–µ—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω/–æ–±–Ω–æ–≤–ª—ë–Ω git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

- **`BUILD_SERVER_GIT_SSH_KEY`** - SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è **–ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
  - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ SSH –∫–ª—é—á–∞ (Deploy Key –∏–∑ GitHub)
  - –î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–µ –Ω—É–∂–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –≠—Ç–æ –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é**, –Ω–µ –ø—É—Ç–∞—Ç—å —Å `BUILD_SERVER_SSH_KEY` (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É)

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

- **`ENABLE_BUILD_CACHE`** - –í–∫–ª—é—á–µ–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è Docker —Å–ª–æ—ë–≤ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
  - –ó–Ω–∞—á–µ–Ω–∏—è: `true` –∏–ª–∏ `false`
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `false` (–∫–µ—à –æ—Ç–∫–ª—é—á—ë–Ω, –∫–∞–∂–¥–∞—è —Å–±–æ—Ä–∫–∞ —Å –Ω—É–ª—è)
  - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `true` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–±–æ—Ä–æ–∫
  - –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö —Å–±–æ—Ä–∫–∏:
    - **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Actions Cache
    - **–£–¥–∞–ª—ë–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–µ—à Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å–±–æ—Ä–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–æ–≤:

#### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–±–æ—Ä–∫–∏

- **Git** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- **Docker** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- **SSH** –¥–æ—Å—Ç—É–ø —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Docker –∫–æ–º–∞–Ω–¥

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏

```bash
# Ubuntu/Debian
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
sudo apt-get update
sudo apt-get install -y git

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# CentOS/RHEL
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
sudo yum install -y git

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤
exit
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á –¥–ª—è —Å–±–æ—Ä–∫–∏
ssh-keygen -t ed25519 -C "github-actions-build" -f ~/.ssh/github_actions_build -N ""

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å–±–æ—Ä–∫–∏
ssh-copy-id -i ~/.ssh/github_actions_build.pub BUILD_USER@BUILD_HOST

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -i ~/.ssh/github_actions_build BUILD_USER@BUILD_HOST "docker --version"
```

#### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ GitHub Secrets

```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/github_actions_build
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –≤—ã–≤–æ–¥ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ GitHub Secrets –∫–∞–∫ `BUILD_SERVER_SSH_KEY`.

#### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤!** –î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —ç—Ç–æ—Ç —à–∞–≥ –Ω–µ –Ω—É–∂–µ–Ω.

##### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Deploy Key –¥–ª—è GitHub

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á –¥–ª—è GitHub
ssh-keygen -t ed25519 -C "build-server-deploy-key" -f ~/.ssh/github_build_deploy_key -N ""

# –ü–æ–∫–∞–∂–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/github_build_deploy_key.pub
```

##### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Deploy Key –≤ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. **Settings** ‚Üí **Deploy keys** ‚Üí **Add deploy key**
3. Title: `Build Server Deploy Key`
4. Key: –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `github_build_deploy_key.pub`
5. ‚úÖ **–ù–µ —Å—Ç–∞–≤—å—Ç–µ** –≥–∞–ª–æ—á–∫—É "Allow write access" (–Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ read)
6. –ù–∞–∂–º–∏—Ç–µ **Add key**

##### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤ GitHub Secrets

```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/github_build_deploy_key
```

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
2. –ù–∞–∂–º–∏—Ç–µ **New repository secret**
3. Name: `BUILD_SERVER_GIT_SSH_KEY`
4. Secret: –≤—Å—Ç–∞–≤—å—Ç–µ **–≤–µ—Å—å** –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–≤–∫–ª—é—á–∞—è `-----BEGIN` –∏ `-----END`)
5. –ù–∞–∂–º–∏—Ç–µ **Add secret**

#### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤, –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º push –≤ `main`:
- –í –ª–æ–≥–∞—Ö GitHub Actions –≤—ã —É–≤–∏–¥–∏—Ç–µ: `üõ∞Ô∏è Remote build server configuration detected. Using remote builder.`
- –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `BUILD_SERVER_GIT_SSH_KEY`: `üîë Using SSH for git operations`
- –ï—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π): `üåê Using HTTPS for git operations`
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –±—É–¥–µ—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ `BUILD_SERVER_PROJECT_PATH`
- –°–±–æ—Ä–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- –ì–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω –æ–±—Ä–∞—Ç–Ω–æ –∏ –ø–µ—Ä–µ–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–µ–ø–ª–æ—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose

```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ (–≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—É—Ç—å)
# –í–∞—Ä–∏–∞–Ω—Ç 1: –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mkdir -p ~/atom-dbro-backend
cd ~/atom-dbro-backend

# –í–∞—Ä–∏–∞–Ω—Ç 2: –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
sudo mkdir -p /opt/atom-dbro-backend
sudo chown $USER:$USER /opt/atom-dbro-backend
cd /opt/atom-dbro-backend
```

**‚ö†Ô∏è –í–ê–ñ–ù–û**: 
- –ó–∞–ø–æ–º–Ω–∏—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—É—Ç—å - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–∞ `DEPLOY_PROJECT_PATH` –≤ GitHub!
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/home/user/atom-dbro-backend`, –∞ –Ω–µ `~/atom-dbro-backend`)

#### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

```bash
# docker-compose.yml
# .env (—Å production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
```

–ò–ª–∏ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è):

```bash
git clone https://github.com/Web2Bizz/atom-dbro-backend.git ~/atom-dbro-backend
cd ~/atom-dbro-backend
```

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `docker-compose.yml` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞!

#### 4. –°–æ–∑–¥–∞–Ω–∏–µ Docker —Å–µ—Ç–µ–π

```bash
docker network create atom-external-network
docker network create atom-internal-network
```

#### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-password
POSTGRES_DB=atom_dbro
POSTGRES_PORT=5432

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
PORT=3000

# JWT
JWT_SECRET=your-very-secure-secret-key
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your-very-secure-refresh-secret-key
JWT_REFRESH_EXPIRES_IN=7d

# CORS (–¥–ª—è production —É–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
# CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# Database URL
DATABASE_URL=postgresql://postgres:your-secure-password@postgres:5432/atom_dbro

# S3 Configuration
S3_BUCKET_NAME=your-bucket-name
S3_ACCESS_KEY_ID=your-access-key-id
S3_SECRET_ACCESS_KEY=your-secret-access-key
S3_REGION=us-east-1

# Redis Configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
# FORGOT_PASSWORD_TOKEN_TTL=3600  # TTL —Ç–æ–∫–µ–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3600 = 1 —á–∞—Å)

# Frontend URL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# FRONTEND_URL=https://yourdomain.com  # –ë–∞–∑–æ–≤—ã–π URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ –ø–∏—Å—å–º–∞—Ö)

# Docker Image (–¥–ª—è docker-compose.yml)
# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è DOCKER_IMAGE –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
# –ù–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ .env —Ñ–∞–π–ª–µ
```
<ÔΩútool‚ñÅcall‚ñÅbeginÔΩú>
read_lints

#### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–∞ –¥–ª—è GitHub Actions

**–í–∞–∂–Ω–æ**: SSH –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏–Ω–∞—á–µ –¥–µ–ø–ª–æ–π –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

##### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ SSH –∫–ª—é—á–∞

–ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ø–∞—Ä—É SSH –∫–ª—é—á–µ–π:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á (–±–µ–∑ –ø–∞—Ä–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github_actions_deploy -N ""

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ RSA (–µ—Å–ª–∏ ed25519 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
ssh-keygen -t rsa -b 4096 -C "github-actions-deploy" -f ~/.ssh/github_actions_deploy -N ""
```

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –Ω–∞ –∫–ª—é—á (–Ω–∞–∂–º–∏—Ç–µ Enter –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ passphrase), –∏–Ω–∞—á–µ GitHub Actions –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

##### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É—è ssh-copy-id (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
# –ó–∞–º–µ–Ω–∏—Ç–µ USER –∏ HOST –Ω–∞ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è
ssh-copy-id -i ~/.ssh/github_actions_deploy.pub USER@HOST

# –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
cat ~/.ssh/github_actions_deploy.pub

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ authorized_keys
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh USER@HOST

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
mkdir -p ~/.ssh
chmod 700 ~/.ssh
echo "–í–ê–®_–ü–£–ë–õ–ò–ß–ù–´–ô_–ö–õ–Æ–ß_–°–Æ–î–ê" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
exit
```

##### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
# –ó–∞–º–µ–Ω–∏—Ç–µ USER, HOST –∏ PORT –Ω–∞ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è
ssh -i ~/.ssh/github_actions_deploy -p PORT USER@HOST \
  "echo 'SSH connection successful' && hostname"
```

–ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.

##### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤ GitHub Secrets

```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –≤–∫–ª—é—á–∞—è –∑–∞–≥–æ–ª–æ–≤–∫–∏)
cat ~/.ssh/github_actions_deploy
```

**–í–∞–∂–Ω–æ**: –ö–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–ª—é—á, –≤–∫–ª—é—á–∞—è —Å—Ç—Ä–æ–∫–∏:
- `-----BEGIN OPENSSH PRIVATE KEY-----` (–∏–ª–∏ `-----BEGIN RSA PRIVATE KEY-----`)
- –í—Å–µ —Å—Ç—Ä–æ–∫–∏ –∫–ª—é—á–∞
- `-----END OPENSSH PRIVATE KEY-----` (–∏–ª–∏ `-----END RSA PRIVATE KEY-----`)

–î–æ–±–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ GitHub:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
2. –ù–∞–∂–º–∏—Ç–µ **New repository secret**
3. Name: `DEPLOY_SSH_KEY`
4. Secret: –≤—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
5. –ù–∞–∂–º–∏—Ç–µ **Add secret**

##### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∑–∞–º–µ–Ω–∏—Ç–µ USER –∏ PROJECT_PATH –Ω–∞ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è)
sudo usermod -aG docker USER
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
ls -la PROJECT_PATH
```

#### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å docker –∫–æ–º–∞–Ω–¥—ã
sudo usermod -aG docker $USER

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
chmod 755 ~/atom-dbro-backend
```

### –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É `main`:

#### –≠—Ç–∞–ø 1: –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ (Build)

**–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
1. GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç workflow (`.github/workflows/deploy.yml`)
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Å–±–æ—Ä–∫–∏ (–ª–æ–∫–∞–ª—å–Ω—ã–π, –µ—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã —É–¥–∞–ª—ë–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
3. –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑ –Ω–∞ GitHub runner
4. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑ –≤ –∞—Ä—Ö–∏–≤ `image.tar.gz`
5. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–æ–≤

**–£–¥–∞–ª—ë–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã):**
1. GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç workflow
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Å–±–æ—Ä–∫–∏ (—É–¥–∞–ª—ë–Ω–Ω—ã–π, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `BUILD_SERVER_*` —Å–µ–∫—Ä–µ—Ç—ã)
3. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–±–æ—Ä–∫–∏ –ø–æ SSH
4. –ö–ª–æ–Ω–∏—Ä—É–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ `git clone` –∏–ª–∏ `git fetch`
5. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –Ω—É–∂–Ω—ã–π –∫–æ–º–º–∏—Ç (`git checkout $GITHUB_SHA`)
6. –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–±–æ—Ä–∫—É Docker –æ–±—Ä–∞–∑–∞ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
7. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑ –≤ `/tmp/atom-dbro-image.tar.gz` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
8. –°–∫–∞—á–∏–≤–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ SCP
9. –û—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏
10. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–æ–≤

#### –≠—Ç–∞–ø 2: –ü–µ—Ä–µ–¥–∞—á–∞ –æ–±—Ä–∞–∑–∞ (Transfer)

1. –°–∫–∞—á–∏–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç `image.tar.gz` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç—Ç–∞–ø–∞
2. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –¥–µ–ø–ª–æ—è –ø–æ SSH
3. –ü–µ—Ä–µ–¥–∞—ë—Ç –æ–±—Ä–∞–∑ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ SCP –≤ `/tmp/image.tar.gz`
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏

#### –≠—Ç–∞–ø 3: –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Deploy)

1. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ SSH
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (`DEPLOY_PROJECT_PATH`)
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑ –≤ Docker (`docker load -i /tmp/image.tar.gz`)
4. –£–¥–∞–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞
5. –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–±—Ä–∞–∑–∞
6. –°–æ–∑–¥–∞—ë—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Docker —Å–µ—Ç–∏ (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
7. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
8. –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ `docker compose` (—Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
9. –û–∂–∏–¥–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–¥–æ 60 —Å–µ–∫—É–Ω–¥)
10. –í—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`npm run db:apply-all`) - **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `RUN_MIGRATIONS=true`**
11. –û—á–∏—â–∞–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker —Ä–µ—Å—É—Ä—Å—ã
12. –£–≤–µ–¥–æ–º–ª—è–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ GitHub Actions

**‚ö†Ô∏è –í–ê–ñ–ù–û**: 
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–µ–∫—Ä–µ—Ç `RUN_MIGRATIONS=true`**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏ **–Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è** - –∏—Ö –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `docker compose` (–Ω–µ `docker-compose`)
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É–¥–∞–ª—ë–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏, —Å–µ—Ä–≤–µ—Ä —Å–±–æ—Ä–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä –¥–µ–ø–ª–æ—è –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

–î–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–°–æ–±–µ—Ä–∏—Ç–µ Docker –æ–±—Ä–∞–∑** (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):
```bash
docker build -t atom-dbro-backend:latest .
```

2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**:
```bash
cd /path/to/project
export DOCKER_IMAGE="atom-dbro-backend:latest"
docker compose up -d --force-recreate --no-deps app
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/deploy.sh` (–µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω).

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–¥–∞–ª—ë–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏

- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –º–∏–Ω—É—Ç GitHub Actions** - —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - Docker –∫–µ—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–±–æ—Ä–∫–∞–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Å–±–æ—Ä–∫–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–µ –ø–æ–∫–∏–¥–∞–µ—Ç –≤–∞—à—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (–∫—Ä–æ–º–µ GitHub)

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ —Å–±–æ—Ä–∫–∏

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ | –£–¥–∞–ª—ë–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ |
|----------------|------------------|------------------|
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∞** | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è | –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç GitHub | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∏–Ω—É—Ç—ã GitHub Actions | –í–∞—à —Å–µ—Ä–≤–µ—Ä |
| **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** | GitHub Actions Cache | –õ–æ–∫–∞–ª—å–Ω—ã–π Docker –∫–µ—à |
| **–†–µ—Å—É—Ä—Å—ã** | 2 CPU, 7 GB RAM (GitHub) | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ |
| **–°–µ—Ç—å** | –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |

### Troubleshooting CI/CD

#### –ü—Ä–æ–±–ª–µ–º–∞: GitHub Actions –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –¥–µ–ø–ª–æ—è

**–û—à–∏–±–∫–∞**: `Permission denied (publickey)` –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É –¥–µ–ø–ª–æ—è

**–†–µ—à–µ–Ω–∏–µ**:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub Secrets**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç `DEPLOY_SSH_KEY` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–≤–∫–ª—é—á–∞—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ `-----BEGIN` –∏ `-----END`)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
   cat ~/.ssh/authorized_keys
   # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å ssh-ed25519 –∏–ª–∏ ssh-rsa)
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
   chmod 700 ~/.ssh
   chmod 600 ~/.ssh/authorized_keys
   ls -la ~/.ssh
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –¥–æ—Å—Ç—É–ø –≤—Ä—É—á–Ω—É—é**:
   ```bash
   # –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
   ssh -i ~/.ssh/github_actions_deploy -p PORT USER@HOST
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
   sudo ufw status
   # –ï—Å–ª–∏ SSH –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç:
   sudo ufw allow PORT/tcp
   ```

6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH —Å–µ—Ä–≤–∏—Å**:
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
   sudo systemctl status ssh
   # –ò–ª–∏ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º:
   sudo systemctl status sshd
   ```

7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
   sudo tail -f /var/log/auth.log
   # –ò–ª–∏ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º:
   sudo tail -f /var/log/secure
   ```

8. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –±–µ–∑ –ø–∞—Ä–æ–ª—è**:
   - –ï—Å–ª–∏ –∫–ª—é—á –∑–∞—â–∏—â–µ–Ω –ø–∞—Ä–æ–ª–µ–º, GitHub Actions –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –±–µ–∑ –ø–∞—Ä–æ–ª—è: `ssh-keygen -t ed25519 -N ""`

#### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "PROJECT_DIR is not set"

**–û—à–∏–±–∫–∞**: `‚ùå ERROR: PROJECT_DIR is not set`

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç `DEPLOY_PROJECT_PATH` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ GitHub Secrets
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/home/user/atom-dbro-backend`, –∞ –Ω–µ `~/atom-dbro-backend`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "Service 'app' not found in docker-compose.yml"

**–û—à–∏–±–∫–∞**: `‚ùå ERROR: Service 'app' not found in docker-compose.yml`

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `docker-compose.yml` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Å –Ω—É–∂–Ω—ã–º –∏–º–µ–Ω–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `docker-compose.yml`
3. –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `DEPLOY_SERVICE_NAME` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º

#### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "no such service: app"

**–û—à–∏–±–∫–∞**: `no such service: app`

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `docker-compose.yml` –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å —Å –∏–º–µ–Ω–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ `DEPLOY_SERVICE_NAME` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `app`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `docker-compose.yml`

#### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs <CONTAINER_NAME>` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Docker —Å–µ—Ç–∏ —Å–æ–∑–¥–∞–Ω—ã: `docker network ls`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–±—Ä–∞–∑–∞: `docker images | grep <IMAGE_NAME>`
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DOCKER_IMAGE` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º `docker compose`

#### –ü—Ä–æ–±–ª–µ–º–∞: Health check –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

**–û—à–∏–±–∫–∞**: `‚ùå Health check failed after 30 attempts`

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `docker logs <CONTAINER_NAME> --tail 100`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –∏ —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 3000 –ø—Ä–æ–±—Ä–æ—à–µ–Ω –≤ `docker-compose.yml`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é: `curl http://localhost:3000/api`
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–æ—Å—å (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏)

#### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–û—à–∏–±–∫–∞**: –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ `‚ÑπÔ∏è Database migrations skipped`

**–†–µ—à–µ–Ω–∏–µ**:
1. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `RUN_MIGRATIONS=true`
3. –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é:
   ```bash
   docker exec <CONTAINER_NAME> npm run db:apply-all
   ```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

**–û—à–∏–±–∫–∞**: `‚ùå Database migrations failed after 3 attempts`

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   docker exec <CONTAINER_NAME> npm run db:studio
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DATABASE_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker ps | grep postgres`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PostgreSQL: `docker logs <POSTGRES_CONTAINER_NAME>`
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
   ```bash
   docker exec -it <CONTAINER_NAME> npm run db:apply-all
   ```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–µ–∫ (project name)

**–û—à–∏–±–∫–∞**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ç–µ–∫ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `atom-dbro-gateway` –≤–º–µ—Å—Ç–æ –Ω—É–∂–Ω–æ–≥–æ)

**–†–µ—à–µ–Ω–∏–µ**:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `DEPLOY_COMPOSE_PROJECT_NAME` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º —Å—Ç–µ–∫–∞
2. –ò–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–æ–π project name –∏—Å–ø–æ–ª—å–∑—É–µ—Ç docker compose: `docker compose ps`

#### –ü—Ä–æ–±–ª–µ–º–∞: GitHub Actions –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–±–æ—Ä–∫–∏

**–û—à–∏–±–∫–∞**: `Permission denied (publickey)` –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–±–æ—Ä–∫–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç `BUILD_SERVER_SSH_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ `~/.ssh/authorized_keys` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏:
   ```bash
   chmod 700 ~/.ssh
   chmod 600 ~/.ssh/authorized_keys
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é:
   ```bash
   ssh -i ~/.ssh/github_actions_build BUILD_USER@BUILD_HOST
   ```

#### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å–±–æ—Ä–∫–∏

**–û—à–∏–±–∫–∞**: `git: command not found` –∏–ª–∏ –æ—à–∏–±–∫–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `git` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏:
   ```bash
   # Ubuntu/Debian
   sudo apt-get update
   sudo apt-get install -y git
   
   # CentOS/RHEL
   sudo yum install -y git
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   git --version
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `BUILD_SERVER_PROJECT_PATH`:
   ```bash
   ls -la $(dirname "$BUILD_SERVER_PROJECT_PATH")
   ```
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞:
   ```bash
   df -h
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ GitHub —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–±–æ—Ä–∫–∏:
   ```bash
   curl -I https://github.com
   ```
5. –ï—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **–ø—Ä–∏–≤–∞—Ç–Ω—ã–π**, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–µ–∫—Ä–µ—Ç `BUILD_SERVER_GIT_SSH_KEY`:
   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–ª—é—á
   ls -la ~/.ssh/github_deploy_key
   cat ~/.ssh/config | grep -A 4 "Host github.com"
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ GitHub
   ssh -T git@github.com
   # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: "Hi USERNAME! You've successfully authenticated..."
   ```

#### –ü—Ä–æ–±–ª–µ–º–∞: –°–±–æ—Ä–∫–∞ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

**–û—à–∏–±–∫–∞**: Docker build fails –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏:
   ```bash
   docker --version
   sudo systemctl status docker
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Docker –∫–æ–º–∞–Ω–¥:
   ```bash
   sudo usermod -aG docker BUILD_USER
   # –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ:
   ```bash
   df -h
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Docker:
   ```bash
   sudo journalctl -u docker --no-pager | tail -50
   ```

#### –ü—Ä–æ–±–ª–µ–º–∞: –û–±—Ä–∞–∑ –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–±–æ—Ä–∫–∏

**–û—à–∏–±–∫–∞**: `scp` –Ω–µ –º–æ–∂–µ—Ç —Å–∫–∞—á–∞—Ç—å `image.tar.gz`

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±—Ä–∞–∑ –±—ã–ª —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   ssh BUILD_USER@BUILD_HOST "ls -lh /tmp/atom-dbro-image.tar.gz"
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É:
   ```bash
   ssh BUILD_USER@BUILD_HOST "chmod 644 /tmp/atom-dbro-image.tar.gz"
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ GitHub runner (–æ–±—ã—á–Ω–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞)

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —É–¥–∞—ë—Ç—Å—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**–û—à–∏–±–∫–∞**: `Permission denied (publickey)` –∏–ª–∏ `Repository not found` –ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. **–î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤** –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `BUILD_SERVER_GIT_SSH_KEY`:
   - –°–æ–∑–¥–∞–π—Ç–µ Deploy Key –≤ GitHub (Settings ‚Üí Deploy keys)
   - –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ GitHub Secrets –∫–∞–∫ `BUILD_SERVER_GIT_SSH_KEY`
   
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Deploy Key –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Settings ‚Üí Deploy keys
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
   
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–±–æ—Ä–∫–∏:
   ```bash
   # SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å–±–æ—Ä–∫–∏
   ssh BUILD_USER@BUILD_HOST
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–ª—é—á–∞
   ls -la ~/.ssh/github_deploy_key
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–æ–Ω—Ñ–∏–≥–∞
   cat ~/.ssh/config
   
   # –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ GitHub
   ssh -T git@github.com
   # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: "Hi USERNAME! You've successfully authenticated..."
   ```

4. **–î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤** —Å–µ–∫—Ä–µ—Ç `BUILD_SERVER_GIT_SSH_KEY` –Ω–µ –Ω—É–∂–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS

#### –ü—Ä–æ–±–ª–µ–º–∞: –ö–µ—à –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —É–¥–∞–ª—ë–Ω–Ω–æ–π —Å–±–æ—Ä–∫–µ

**–û—à–∏–±–∫–∞**: –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –Ω—É–ª—è, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ `ENABLE_BUILD_CACHE=true`

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç `ENABLE_BUILD_CACHE` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `true` (–Ω–µ `True` –∏–ª–∏ `TRUE`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–±–æ—Ä–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–µ—à:
   ```bash
   docker system df
   ```
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è –∫–µ—à–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ `‚úÖ Build cache enabled`

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ–µ–≤

–í—Å–µ –¥–µ–ø–ª–æ–∏ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ GitHub:
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí **Actions**
- –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π workflow run
- –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   atom-external-network             ‚îÇ
‚îÇ   (–≤–Ω–µ—à–Ω—è—è —Å–µ—Ç—å)                    ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ   atom-dbro-app             ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   (–ø–æ—Ä—Ç 3000)               ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   atom-internal-network             ‚îÇ
‚îÇ   (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å)                 ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ   atom-dbro-app             ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ              ‚îÇ                      ‚îÇ
‚îÇ              ‚ñº                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ   atom-dbro-postgres        ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   (–ø–æ—Ä—Ç 5432)               ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

